---
source: tests/parse.rs
expression: "test_parse(common :: samples :: BAD_SYNTAX)"
---
const arr: number[] = [1,,.,3]
const foo = () => {
    (
}
const other = obj.
const otherfunc = () => {
    obja.()
    objb.
}
---
Ok(
    (
        Slice("\n"),
        ASTInner {
            slice: Slice("\nconst arr: number[] = [1,,.,3]\nconst foo = () => {\n    (\n}\nconst other = obj.\nconst otherfunc = () => {\n    obja.()\n    objb.\n}"),
            details: Module {
                declarations: [
                    ASTInner {
                        slice: Slice("const arr: number[] = [1,,.,3]"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("arr"),
                                details: PlainIdentifier {
                                    slice: Slice("arr"),
                                },
                            },
                            type_annotation: Some(
                                (
                                    Slice(":"),
                                    ASTInner {
                                        slice: Slice("number[]"),
                                        details: ArrayTypeExpression {
                                            element: ASTInner {
                                                slice: Slice("number"),
                                                details: NumberTypeExpression,
                                            },
                                            open_bracket: Slice("["),
                                            close_bracket: Slice("]"),
                                        },
                                    },
                                ),
                            ),
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("[1,,.,3]"),
                                details: ArrayLiteral {
                                    open_bracket: Slice("["),
                                    elements: [
                                        Malformed {
                                            slice: Slice("1,,.,3"),
                                            message: "Expected expression",
                                        },
                                    ],
                                    commas: [],
                                    trailing_comma: None,
                                    close_bracket: Some(
                                        Slice("]"),
                                    ),
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const foo = () => {\n    (\n}"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("foo"),
                                details: PlainIdentifier {
                                    slice: Slice("foo"),
                                },
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("() => {\n    (\n}"),
                                details: FunctionExpression {
                                    open_paren: Some(
                                        Slice("("),
                                    ),
                                    parameters: [],
                                    commas: [],
                                    trailing_comma: None,
                                    close_paren: Some(
                                        Slice(")"),
                                    ),
                                    return_type: None,
                                    arrow: Slice("=>"),
                                    body: ASTInner {
                                        slice: Slice("{\n    (\n}"),
                                        details: Block(
                                            ASTInner {
                                                slice: Slice("{\n    (\n}"),
                                                details: Block {
                                                    statements: [
                                                        Malformed {
                                                            slice: Slice("\n    (\n"),
                                                            message: "Expected statement",
                                                        },
                                                    ],
                                                },
                                            },
                                        ),
                                    },
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const other = obj."),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("other"),
                                details: PlainIdentifier {
                                    slice: Slice("other"),
                                },
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("obj."),
                                details: PropertyAccessExpression {
                                    subject: ASTInner {
                                        slice: Slice("obj"),
                                        details: LocalIdentifier {
                                            slice: Slice("obj"),
                                        },
                                    },
                                    dot: Slice("."),
                                    property: Malformed {
                                        slice: Slice(""),
                                        message: "identifier",
                                    },
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const otherfunc = () => {\n    obja.()\n    objb.\n}"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("otherfunc"),
                                details: PlainIdentifier {
                                    slice: Slice("otherfunc"),
                                },
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("() => {\n    obja.()\n    objb.\n}"),
                                details: FunctionExpression {
                                    open_paren: Some(
                                        Slice("("),
                                    ),
                                    parameters: [],
                                    commas: [],
                                    trailing_comma: None,
                                    close_paren: Some(
                                        Slice(")"),
                                    ),
                                    return_type: None,
                                    arrow: Slice("=>"),
                                    body: ASTInner {
                                        slice: Slice("{\n    obja.()\n    objb.\n}"),
                                        details: Block(
                                            ASTInner {
                                                slice: Slice("{\n    obja.()\n    objb.\n}"),
                                                details: Block {
                                                    statements: [
                                                        ASTInner {
                                                            slice: Slice("obja.()"),
                                                            details: Invocation {
                                                                function: ASTInner {
                                                                    slice: Slice("obja."),
                                                                    details: PropertyAccessExpression {
                                                                        subject: ASTInner {
                                                                            slice: Slice("obja"),
                                                                            details: LocalIdentifier {
                                                                                slice: Slice("obja"),
                                                                            },
                                                                        },
                                                                        dot: Slice("."),
                                                                        property: Malformed {
                                                                            slice: Slice(""),
                                                                            message: "identifier",
                                                                        },
                                                                    },
                                                                },
                                                                open_paren: Slice("("),
                                                                arguments: [],
                                                                commas: [],
                                                                trailing_comma: None,
                                                                close_paren: Some(
                                                                    Slice(")"),
                                                                ),
                                                            },
                                                        },
                                                        ASTInner {
                                                            slice: Slice("objb."),
                                                            details: PropertyAccessExpression {
                                                                subject: ASTInner {
                                                                    slice: Slice("objb"),
                                                                    details: LocalIdentifier {
                                                                        slice: Slice("objb"),
                                                                    },
                                                                },
                                                                dot: Slice("."),
                                                                property: Malformed {
                                                                    slice: Slice(""),
                                                                    message: "identifier",
                                                                },
                                                            },
                                                        },
                                                    ],
                                                },
                                            },
                                        ),
                                    },
                                },
                            },
                        },
                    },
                ],
            },
        },
    ),
)
