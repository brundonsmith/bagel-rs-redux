---
source: tests/parse.rs
expression: "parse::module(slice)"
---
Ok(
    (
        Slice("\n"),
        ASTInner {
            slice: Slice("\nfrom './bar.bgl' import { thing }\n\nconst x: number = 42\nconst y = true\nconst z = false\nconst c: boolean = a == b || y != z\nconst foo = [1, 2, {stuff: 'other'}]\nconst func = (a: number, b: string): boolean =>\n    if a > 5 {\n        a\n    } else {\n        a + b\n    }\nconst bar: (number, number) => number = (a, b) => a + b\nconst a: string = nil\n\nconst main = () => {\n    js.console.log(x)\n}\n\nconst b: number = y * 2 + x"),
            details: Module {
                declarations: [
                    ASTInner {
                        slice: Slice("from './bar.bgl' import { thing }"),
                        details: ImportDeclaration {
                            from_keyword: Slice("from"),
                            path: ASTInner {
                                slice: Slice("'./bar.bgl'"),
                                details: StringLiteral {
                                    open_quote: Slice("'"),
                                    contents: Slice("./bar.bgl"),
                                    close_quote: Slice("'"),
                                },
                            },
                            import_keyword: Slice("import"),
                            open_brace: Slice("{"),
                            imports: [
                                ImportSpecifier {
                                    name: ASTInner {
                                        slice: Slice("thing"),
                                        details: PlainIdentifier,
                                    },
                                    alias: None,
                                },
                            ],
                            commas: [],
                            trailing_comma: None,
                            close_brace: Some(
                                Slice("}"),
                            ),
                        },
                    },
                    ASTInner {
                        slice: Slice("const x: number = 42"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("x"),
                                details: PlainIdentifier,
                            },
                            type_annotation: Some(
                                (
                                    Slice(":"),
                                    ASTInner {
                                        slice: Slice("number"),
                                        details: NumberTypeExpression,
                                    },
                                ),
                            ),
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("42"),
                                details: NumberLiteral,
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const y = true"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("y"),
                                details: PlainIdentifier,
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("true"),
                                details: BooleanLiteral {
                                    value: true,
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const z = false"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("z"),
                                details: PlainIdentifier,
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("false"),
                                details: BooleanLiteral {
                                    value: false,
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const c: boolean = a == b || y != z"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("c"),
                                details: PlainIdentifier,
                            },
                            type_annotation: Some(
                                (
                                    Slice(":"),
                                    ASTInner {
                                        slice: Slice("boolean"),
                                        details: BooleanTypeExpression,
                                    },
                                ),
                            ),
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("a == b || y != z"),
                                details: BinaryOperation {
                                    left: ASTInner {
                                        slice: Slice("a == b"),
                                        details: BinaryOperation {
                                            left: ASTInner {
                                                slice: Slice("a"),
                                                details: LocalIdentifier {
                                                    identifier: ASTInner {
                                                        slice: Slice("a"),
                                                        details: PlainIdentifier,
                                                    },
                                                },
                                            },
                                            operator: ASTInner {
                                                slice: Slice("=="),
                                                details: Equal,
                                            },
                                            right: ASTInner {
                                                slice: Slice("b"),
                                                details: LocalIdentifier {
                                                    identifier: ASTInner {
                                                        slice: Slice("b"),
                                                        details: PlainIdentifier,
                                                    },
                                                },
                                            },
                                        },
                                    },
                                    operator: ASTInner {
                                        slice: Slice("||"),
                                        details: Or,
                                    },
                                    right: ASTInner {
                                        slice: Slice("y != z"),
                                        details: BinaryOperation {
                                            left: ASTInner {
                                                slice: Slice("y"),
                                                details: LocalIdentifier {
                                                    identifier: ASTInner {
                                                        slice: Slice("y"),
                                                        details: PlainIdentifier,
                                                    },
                                                },
                                            },
                                            operator: ASTInner {
                                                slice: Slice("!="),
                                                details: NotEqual,
                                            },
                                            right: ASTInner {
                                                slice: Slice("z"),
                                                details: LocalIdentifier {
                                                    identifier: ASTInner {
                                                        slice: Slice("z"),
                                                        details: PlainIdentifier,
                                                    },
                                                },
                                            },
                                        },
                                    },
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const foo = [1, 2, {stuff: 'other'}]"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("foo"),
                                details: PlainIdentifier,
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("[1, 2, {stuff: 'other'}]"),
                                details: ArrayLiteral {
                                    open_bracket: Slice("["),
                                    elements: [
                                        ASTInner {
                                            slice: Slice("1"),
                                            details: NumberLiteral,
                                        },
                                        ASTInner {
                                            slice: Slice("2"),
                                            details: NumberLiteral,
                                        },
                                        ASTInner {
                                            slice: Slice("{stuff: 'other'}"),
                                            details: ObjectLiteral {
                                                open_brace: Slice("{"),
                                                fields: [
                                                    (
                                                        ASTInner {
                                                            slice: Slice("stuff"),
                                                            details: PlainIdentifier,
                                                        },
                                                        Slice(":"),
                                                        ASTInner {
                                                            slice: Slice("'other'"),
                                                            details: StringLiteral {
                                                                open_quote: Slice("'"),
                                                                contents: Slice("other"),
                                                                close_quote: Slice("'"),
                                                            },
                                                        },
                                                    ),
                                                ],
                                                commas: [],
                                                trailing_comma: None,
                                                close_brace: Some(
                                                    Slice("}"),
                                                ),
                                            },
                                        },
                                    ],
                                    commas: [
                                        Slice(","),
                                        Slice(","),
                                    ],
                                    trailing_comma: None,
                                    close_bracket: Some(
                                        Slice("]"),
                                    ),
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const func = (a: number, b: string): boolean =>\n    if a > 5 {\n        a\n    } else {\n        a + b\n    }"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("func"),
                                details: PlainIdentifier,
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("(a: number, b: string): boolean =>\n    if a > 5 {\n        a\n    } else {\n        a + b\n    }"),
                                details: FunctionExpression {
                                    open_paren: Some(
                                        Slice("("),
                                    ),
                                    parameters: [
                                        (
                                            ASTInner {
                                                slice: Slice("a"),
                                                details: PlainIdentifier,
                                            },
                                            Some(
                                                (
                                                    Slice(":"),
                                                    ASTInner {
                                                        slice: Slice("number"),
                                                        details: NumberTypeExpression,
                                                    },
                                                ),
                                            ),
                                        ),
                                        (
                                            ASTInner {
                                                slice: Slice("b"),
                                                details: PlainIdentifier,
                                            },
                                            Some(
                                                (
                                                    Slice(":"),
                                                    ASTInner {
                                                        slice: Slice("string"),
                                                        details: StringTypeExpression,
                                                    },
                                                ),
                                            ),
                                        ),
                                    ],
                                    commas: [
                                        Slice(","),
                                    ],
                                    trailing_comma: None,
                                    close_paren: Some(
                                        Slice(")"),
                                    ),
                                    return_type: Some(
                                        (
                                            Slice(":"),
                                            ASTInner {
                                                slice: Slice("boolean"),
                                                details: BooleanTypeExpression,
                                            },
                                        ),
                                    ),
                                    arrow: Slice("=>"),
                                    body: ASTInner {
                                        slice: Slice("if a > 5 {\n        a\n    } else {\n        a + b\n    }"),
                                        details: Expression(
                                            ASTInner {
                                                slice: Slice("if a > 5 {\n        a\n    } else {\n        a + b\n    }"),
                                                details: IfElseExpression {
                                                    if_keyword: Slice("if"),
                                                    condition: ASTInner {
                                                        slice: Slice("a > 5"),
                                                        details: BinaryOperation {
                                                            left: ASTInner {
                                                                slice: Slice("a"),
                                                                details: LocalIdentifier {
                                                                    identifier: ASTInner {
                                                                        slice: Slice("a"),
                                                                        details: PlainIdentifier,
                                                                    },
                                                                },
                                                            },
                                                            operator: ASTInner {
                                                                slice: Slice(">"),
                                                                details: GreaterThan,
                                                            },
                                                            right: ASTInner {
                                                                slice: Slice("5"),
                                                                details: NumberLiteral,
                                                            },
                                                        },
                                                    },
                                                    open_brace: Slice("{"),
                                                    consequent: ASTInner {
                                                        slice: Slice("a"),
                                                        details: LocalIdentifier {
                                                            identifier: ASTInner {
                                                                slice: Slice("a"),
                                                                details: PlainIdentifier,
                                                            },
                                                        },
                                                    },
                                                    close_brace: Slice("}"),
                                                    else_clause: Some(
                                                        ElseBlock {
                                                            else_keyword: Slice("else"),
                                                            open_brace: Slice("{"),
                                                            expression: ASTInner {
                                                                slice: Slice("a + b"),
                                                                details: BinaryOperation {
                                                                    left: ASTInner {
                                                                        slice: Slice("a"),
                                                                        details: LocalIdentifier {
                                                                            identifier: ASTInner {
                                                                                slice: Slice("a"),
                                                                                details: PlainIdentifier,
                                                                            },
                                                                        },
                                                                    },
                                                                    operator: ASTInner {
                                                                        slice: Slice("+"),
                                                                        details: Add,
                                                                    },
                                                                    right: ASTInner {
                                                                        slice: Slice("b"),
                                                                        details: LocalIdentifier {
                                                                            identifier: ASTInner {
                                                                                slice: Slice("b"),
                                                                                details: PlainIdentifier,
                                                                            },
                                                                        },
                                                                    },
                                                                },
                                                            },
                                                            close_brace: Slice("}"),
                                                        },
                                                    ),
                                                },
                                            },
                                        ),
                                    },
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const bar: (number, number) => number = (a, b) => a + b"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("bar"),
                                details: PlainIdentifier,
                            },
                            type_annotation: Some(
                                (
                                    Slice(":"),
                                    ASTInner {
                                        slice: Slice("(number, number) => number"),
                                        details: FunctionTypeExpression {
                                            open_paren: Slice("("),
                                            parameters: [
                                                (
                                                    None,
                                                    ASTInner {
                                                        slice: Slice("number"),
                                                        details: NumberTypeExpression,
                                                    },
                                                ),
                                                (
                                                    None,
                                                    ASTInner {
                                                        slice: Slice("number"),
                                                        details: NumberTypeExpression,
                                                    },
                                                ),
                                            ],
                                            commas: [
                                                Slice(","),
                                            ],
                                            trailing_comma: None,
                                            close_paren: Slice(")"),
                                            arrow: Slice("=>"),
                                            return_type: ASTInner {
                                                slice: Slice("number"),
                                                details: NumberTypeExpression,
                                            },
                                        },
                                    },
                                ),
                            ),
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("(a, b) => a + b"),
                                details: FunctionExpression {
                                    open_paren: Some(
                                        Slice("("),
                                    ),
                                    parameters: [
                                        (
                                            ASTInner {
                                                slice: Slice("a"),
                                                details: PlainIdentifier,
                                            },
                                            None,
                                        ),
                                        (
                                            ASTInner {
                                                slice: Slice("b"),
                                                details: PlainIdentifier,
                                            },
                                            None,
                                        ),
                                    ],
                                    commas: [
                                        Slice(","),
                                    ],
                                    trailing_comma: None,
                                    close_paren: Some(
                                        Slice(")"),
                                    ),
                                    return_type: None,
                                    arrow: Slice("=>"),
                                    body: ASTInner {
                                        slice: Slice("a + b"),
                                        details: Expression(
                                            ASTInner {
                                                slice: Slice("a + b"),
                                                details: BinaryOperation {
                                                    left: ASTInner {
                                                        slice: Slice("a"),
                                                        details: LocalIdentifier {
                                                            identifier: ASTInner {
                                                                slice: Slice("a"),
                                                                details: PlainIdentifier,
                                                            },
                                                        },
                                                    },
                                                    operator: ASTInner {
                                                        slice: Slice("+"),
                                                        details: Add,
                                                    },
                                                    right: ASTInner {
                                                        slice: Slice("b"),
                                                        details: LocalIdentifier {
                                                            identifier: ASTInner {
                                                                slice: Slice("b"),
                                                                details: PlainIdentifier,
                                                            },
                                                        },
                                                    },
                                                },
                                            },
                                        ),
                                    },
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const a: string = nil"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("a"),
                                details: PlainIdentifier,
                            },
                            type_annotation: Some(
                                (
                                    Slice(":"),
                                    ASTInner {
                                        slice: Slice("string"),
                                        details: StringTypeExpression,
                                    },
                                ),
                            ),
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("nil"),
                                details: NilLiteral,
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const main = () => {\n    js.console.log(x)\n}"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("main"),
                                details: PlainIdentifier,
                            },
                            type_annotation: None,
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("() => {\n    js.console.log(x)\n}"),
                                details: FunctionExpression {
                                    open_paren: Some(
                                        Slice("("),
                                    ),
                                    parameters: [],
                                    commas: [],
                                    trailing_comma: None,
                                    close_paren: Some(
                                        Slice(")"),
                                    ),
                                    return_type: None,
                                    arrow: Slice("=>"),
                                    body: ASTInner {
                                        slice: Slice("{\n    js.console.log(x)\n}"),
                                        details: Block(
                                            ASTInner {
                                                slice: Slice("{\n    js.console.log(x)\n}"),
                                                details: Block {
                                                    statements: [
                                                        ASTInner {
                                                            slice: Slice("js.console.log(x)"),
                                                            details: Invocation {
                                                                function: ASTInner {
                                                                    slice: Slice("js.console.log"),
                                                                    details: PropertyAccessExpression {
                                                                        subject: ASTInner {
                                                                            slice: Slice("js.console"),
                                                                            details: PropertyAccessExpression {
                                                                                subject: ASTInner {
                                                                                    slice: Slice("js"),
                                                                                    details: LocalIdentifier {
                                                                                        identifier: ASTInner {
                                                                                            slice: Slice("js"),
                                                                                            details: PlainIdentifier,
                                                                                        },
                                                                                    },
                                                                                },
                                                                                dot: Slice("."),
                                                                                property: ASTInner {
                                                                                    slice: Slice("console"),
                                                                                    details: PlainIdentifier,
                                                                                },
                                                                            },
                                                                        },
                                                                        dot: Slice("."),
                                                                        property: ASTInner {
                                                                            slice: Slice("log"),
                                                                            details: PlainIdentifier,
                                                                        },
                                                                    },
                                                                },
                                                                open_paren: Slice("("),
                                                                arguments: [
                                                                    ASTInner {
                                                                        slice: Slice("x"),
                                                                        details: LocalIdentifier {
                                                                            identifier: ASTInner {
                                                                                slice: Slice("x"),
                                                                                details: PlainIdentifier,
                                                                            },
                                                                        },
                                                                    },
                                                                ],
                                                                commas: [],
                                                                trailing_comma: None,
                                                                close_paren: Some(
                                                                    Slice(")"),
                                                                ),
                                                            },
                                                        },
                                                    ],
                                                },
                                            },
                                        ),
                                    },
                                },
                            },
                        },
                    },
                    ASTInner {
                        slice: Slice("const b: number = y * 2 + x"),
                        details: ConstDeclaration {
                            export_keyword: None,
                            const_keyword: Slice("const"),
                            identifier: ASTInner {
                                slice: Slice("b"),
                                details: PlainIdentifier,
                            },
                            type_annotation: Some(
                                (
                                    Slice(":"),
                                    ASTInner {
                                        slice: Slice("number"),
                                        details: NumberTypeExpression,
                                    },
                                ),
                            ),
                            equals: Slice("="),
                            value: ASTInner {
                                slice: Slice("y * 2 + x"),
                                details: BinaryOperation {
                                    left: ASTInner {
                                        slice: Slice("y * 2"),
                                        details: BinaryOperation {
                                            left: ASTInner {
                                                slice: Slice("y"),
                                                details: LocalIdentifier {
                                                    identifier: ASTInner {
                                                        slice: Slice("y"),
                                                        details: PlainIdentifier,
                                                    },
                                                },
                                            },
                                            operator: ASTInner {
                                                slice: Slice("*"),
                                                details: Multiply,
                                            },
                                            right: ASTInner {
                                                slice: Slice("2"),
                                                details: NumberLiteral,
                                            },
                                        },
                                    },
                                    operator: ASTInner {
                                        slice: Slice("+"),
                                        details: Add,
                                    },
                                    right: ASTInner {
                                        slice: Slice("x"),
                                        details: LocalIdentifier {
                                            identifier: ASTInner {
                                                slice: Slice("x"),
                                                details: PlainIdentifier,
                                            },
                                        },
                                    },
                                },
                            },
                        },
                    },
                ],
            },
        },
    ),
)
