---
source: tests/parse.rs
expression: "parse::module(slice)"
---
Ok(
    (
        Slice("\n"),
        AST(
            Slice("\nfrom './bar.bgl' import { thing }\n\nconst x: number = 42\nconst y = true\nconst z = false\nconst c: boolean = a == b || y != z\nconst foo = [1, 2, {stuff: 'other'}]\nconst func = (a: number, b: string): boolean =>\n    if a > 5 {\n        a\n    } else {\n        a + b\n    }\nconst bar: (number, number) => number = (a, b) => a + b\nconst a: string = nil\n\nconst main = () => {\n    print(12)\n}\n\nconst b: number = y * 2 + x"), Module(Module { declarations: [AST(Slice("from './bar.bgl' import { thing }"), Declaration(ImportDeclaration(ImportDeclaration { from_keyword: Slice("from"), path: AST(Slice("'./bar.bgl'"), Expression(StringLiteral(StringLiteral { open_quote: Slice("'"), contents: Slice("./bar.bgl"), close_quote: Slice("'") }))), import_keyword: Slice("import"), open_brace: Slice("{"), imports: [ImportSpecifier { name: AST(Slice("thing"), PlainIdentifier(PlainIdentifier)), alias: None }], commas: [], trailing_comma: None, close_brace: Some(Slice("}")) }))), AST(Slice("const x: number = 42"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("x"), PlainIdentifier(PlainIdentifier)), type_annotation: Some((Slice(":"), AST(Slice("number"), TypeExpression(NumberTypeExpression(NumberTypeExpression))))), equals: Slice("="), value: AST(Slice("42"), Expression(NumberLiteral(NumberLiteral))) }))), AST(Slice("const y = true"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("y"), PlainIdentifier(PlainIdentifier)), type_annotation: None, equals: Slice("="), value: AST(Slice("true"), Expression(BooleanLiteral(BooleanLiteral { value: true }))) }))), AST(Slice("const z = false"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("z"), PlainIdentifier(PlainIdentifier)), type_annotation: None, equals: Slice("="), value: AST(Slice("false"), Expression(BooleanLiteral(BooleanLiteral { value: false }))) }))), AST(Slice("const c: boolean = a == b || y != z"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("c"), PlainIdentifier(PlainIdentifier)), type_annotation: Some((Slice(":"), AST(Slice("boolean"), TypeExpression(BooleanTypeExpression(BooleanTypeExpression))))), equals: Slice("="), value: AST(Slice("a == b || y != z"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("a == b"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("a"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("a"), PlainIdentifier(PlainIdentifier)) }))), operator: AST(Slice("=="), BinaryOperator(Equal)), right: AST(Slice("b"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("b"), PlainIdentifier(PlainIdentifier)) }))) }))), operator: AST(Slice("||"), BinaryOperator(Or)), right: AST(Slice("y != z"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("y"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("y"), PlainIdentifier(PlainIdentifier)) }))), operator: AST(Slice("!="), BinaryOperator(NotEqual)), right: AST(Slice("z"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("z"), PlainIdentifier(PlainIdentifier)) }))) }))) }))) }))), AST(Slice("const foo = [1, 2, {stuff: 'other'}]"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("foo"), PlainIdentifier(PlainIdentifier)), type_annotation: None, equals: Slice("="), value: AST(Slice("[1, 2, {stuff: 'other'}]"), Expression(ArrayLiteral(ArrayLiteral { open_bracket: Slice("["), elements: [AST(Slice("1"), Expression(NumberLiteral(NumberLiteral))), AST(Slice("2"), Expression(NumberLiteral(NumberLiteral))), AST(Slice("{stuff: 'other'}"), Expression(ObjectLiteral(ObjectLiteral { open_brace: Slice("{"), fields: [(AST(Slice("stuff"), PlainIdentifier(PlainIdentifier)), Slice(":"), AST(Slice("'other'"), Expression(StringLiteral(StringLiteral { open_quote: Slice("'"), contents: Slice("other"), close_quote: Slice("'") }))))], commas: [], trailing_comma: None, close_brace: Some(Slice("}")) })))], commas: [Slice(","), Slice(",")], trailing_comma: None, close_bracket: Some(Slice("]")) }))) }))), AST(Slice("const func = (a: number, b: string): boolean =>\n    if a > 5 {\n        a\n    } else {\n        a + b\n    }"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("func"), PlainIdentifier(PlainIdentifier)), type_annotation: None, equals: Slice("="), value: AST(Slice("(a: number, b: string): boolean =>\n    if a > 5 {\n        a\n    } else {\n        a + b\n    }"), Expression(FunctionExpression(FunctionExpression { open_paren: Some(Slice("(")), parameters: [(AST(Slice("a"), PlainIdentifier(PlainIdentifier)), Some((Slice(":"), AST(Slice("number"), TypeExpression(NumberTypeExpression(NumberTypeExpression)))))), (AST(Slice("b"), PlainIdentifier(PlainIdentifier)), Some((Slice(":"), AST(Slice("string"), TypeExpression(StringTypeExpression(StringTypeExpression))))))], commas: [Slice(",")], trailing_comma: None, close_paren: Some(Slice(")")), return_type: Some((Slice(":"), AST(Slice("boolean"), TypeExpression(BooleanTypeExpression(BooleanTypeExpression))))), arrow: Slice("=>"), body: AST(Slice("if a > 5 {\n        a\n    } else {\n        a + b\n    }"), FunctionBody(Expression(AST(Slice("if a > 5 {\n        a\n    } else {\n        a + b\n    }"), Expression(IfElseExpression(IfElseExpression { if_keyword: Slice("if"), condition: AST(Slice("a > 5"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("a"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("a"), PlainIdentifier(PlainIdentifier)) }))), operator: AST(Slice(">"), BinaryOperator(GreaterThan)), right: AST(Slice("5"), Expression(NumberLiteral(NumberLiteral))) }))), open_brace: Slice("{"), consequent: AST(Slice("a"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("a"), PlainIdentifier(PlainIdentifier)) }))), close_brace: Slice("}"), else_clause: Some(ElseBlock { else_keyword: Slice("else"), open_brace: Slice("{"), expression: AST(Slice("a + b"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("a"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("a"), PlainIdentifier(PlainIdentifier)) }))), operator: AST(Slice("+"), BinaryOperator(Add)), right: AST(Slice("b"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("b"), PlainIdentifier(PlainIdentifier)) }))) }))), close_brace: Slice("}") }) })))))) }))) }))), AST(Slice("const bar: (number, number) => number = (a, b) => a + b"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("bar"), PlainIdentifier(PlainIdentifier)), type_annotation: Some((Slice(":"), AST(Slice("(number, number) => number"), TypeExpression(FunctionTypeExpression(FunctionTypeExpression { open_paren: Slice("("), parameters: [(None, AST(Slice("number"), TypeExpression(NumberTypeExpression(NumberTypeExpression)))), (None, AST(Slice("number"), TypeExpression(NumberTypeExpression(NumberTypeExpression))))], commas: [Slice(",")], trailing_comma: None, close_paren: Slice(")"), arrow: Slice("=>"), return_type: AST(Slice("number"), TypeExpression(NumberTypeExpression(NumberTypeExpression))) }))))), equals: Slice("="), value: AST(Slice("(a, b) => a + b"), Expression(FunctionExpression(FunctionExpression { open_paren: Some(Slice("(")), parameters: [(AST(Slice("a"), PlainIdentifier(PlainIdentifier)), None), (AST(Slice("b"), PlainIdentifier(PlainIdentifier)), None)], commas: [Slice(",")], trailing_comma: None, close_paren: Some(Slice(")")), return_type: None, arrow: Slice("=>"), body: AST(Slice("a + b"), FunctionBody(Expression(AST(Slice("a + b"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("a"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("a"), PlainIdentifier(PlainIdentifier)) }))), operator: AST(Slice("+"), BinaryOperator(Add)), right: AST(Slice("b"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("b"), PlainIdentifier(PlainIdentifier)) }))) })))))) }))) }))), AST(Slice("const a: string = nil"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("a"), PlainIdentifier(PlainIdentifier)), type_annotation: Some((Slice(":"), AST(Slice("string"), TypeExpression(StringTypeExpression(StringTypeExpression))))), equals: Slice("="), value: AST(Slice("nil"), Expression(NilLiteral(NilLiteral))) }))), AST(Slice("const main = () => {\n    print(12)\n}"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("main"), PlainIdentifier(PlainIdentifier)), type_annotation: None, equals: Slice("="), value: AST(Slice("() => {\n    print(12)\n}"), Expression(FunctionExpression(FunctionExpression { open_paren: Some(Slice("(")), parameters: [], commas: [], trailing_comma: None, close_paren: Some(Slice(")")), return_type: None, arrow: Slice("=>"), body: AST(Slice("{\n    print(12)\n}"), FunctionBody(Block(AST(Slice("{\n    print(12)\n}"), Statement(Block(Block { statements: [AST(Slice("print(12)"), Expression(Invocation(Invocation { function: AST(Slice("print"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("print"), PlainIdentifier(PlainIdentifier)) }))), open_paren: Slice("("), arguments: [AST(Slice("12"), Expression(NumberLiteral(NumberLiteral)))], commas: [], trailing_comma: None, close_paren: Some(Slice(")")) })))] })))))) }))) }))), AST(Slice("const b: number = y * 2 + x"), Declaration(ConstDeclaration(ConstDeclaration { export_keyword: None, const_keyword: Slice("const"), identifier: AST(Slice("b"), PlainIdentifier(PlainIdentifier)), type_annotation: Some((Slice(":"), AST(Slice("number"), TypeExpression(NumberTypeExpression(NumberTypeExpression))))), equals: Slice("="), value: AST(Slice("y * 2 + x"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("y * 2"), Expression(BinaryOperation(BinaryOperation { left: AST(Slice("y"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("y"), PlainIdentifier(PlainIdentifier)) }))), operator: AST(Slice("*"), BinaryOperator(Multiply)), right: AST(Slice("2"), Expression(NumberLiteral(NumberLiteral))) }))), operator: AST(Slice("+"), BinaryOperator(Add)), right: AST(Slice("x"), Expression(LocalIdentifier(LocalIdentifier { identifier: AST(Slice("x"), PlainIdentifier(PlainIdentifier)) }))) }))) })))] }),
        ),
    ),
)
